
import numpy as np

#cam_ = [721.5377, 0.0, 596.5593, 0.0, 721.5377, 149.854, 0.0, 0.0, 1.0]

import tensorflow as tf

x = np.arange(0, 16)
y = np.arange(0, 16)

xv, yv = np.meshgrid(x, y)

print (xv)
print (yv)

xv = xv[np.newaxis, ...]
xv = xv[..., np.newaxis]

yv = yv[np.newaxis, ...]
yv = yv[..., np.newaxis]

input1 = tf.placeholder(dtype=tf.float32, shape=[2, 16,16, 1], name='input_tensor1')
input2 = tf.placeholder(dtype=tf.float32, shape=[1, 16,16, 1], name='input_tensor2')
input3 = tf.placeholder(dtype=tf.float32, shape=[1, 16,16, 1], name='input_tensor3')

b = tf.where(input1>0)
print(b.get_shape())
output = tf.gather_nd(input1, b)
output1 = tf.gather_nd(input2, b)
output2 = tf.gather_nd(input3, b)
sess = tf.Session()

aa = np.array([[0,1,0,2,0,1,0,4,1,0,5,3,6,5,0,1],
[0,1,0,2,0,1,0,4,1,0,5,3,6,5,0,1],[0,1,0,2,0,1,0,4,1,0,5,3,6,5,0,1],[0,1,0,2,0,1,0,4,1,0,5,3,6,5,0,1],
[0,1,0,2,0,1,0,4,1,0,5,3,6,5,0,1],[0,1,0,2,0,1,0,4,1,0,5,3,6,5,0,1],[0,1,0,2,0,1,0,4,1,0,5,3,6,5,0,1],
[0,1,0,2,0,1,0,4,1,0,5,3,6,5,0,1],[0,1,0,2,0,1,0,4,1,0,5,3,6,5,0,1],[0,1,0,2,0,1,0,4,1,0,5,3,6,5,0,1],
[0,1,0,2,0,1,0,4,1,0,5,3,6,5,0,1],[0,1,0,2,0,1,0,4,1,0,5,3,6,5,0,1],[0,1,0,2,0,1,0,4,1,0,5,3,6,5,0,1],
[0,1,0,2,0,1,0,4,1,0,5,3,6,5,0,1],[0,1,0,2,0,1,0,4,1,0,5,3,6,5,0,1],[0,1,0,2,0,1,0,4,1,0,5,3,6,5,0,1]], dtype = np.float32)


aa = np.array([
[[0,1,0,2,0,1,0,4,1,0,5,3,6,5,0,1],
[0,1,0,2,0,1,0,4,1,0,5,3,6,5,0,1],[0,1,0,2,0,1,0,4,1,0,5,3,6,5,0,1],[0,1,0,2,0,1,0,4,1,0,5,3,6,5,0,1],
[0,1,0,2,0,1,0,4,1,0,5,3,6,5,0,1],[0,1,0,2,0,1,0,4,1,0,5,3,6,5,0,1],[0,1,0,2,0,1,0,4,1,0,5,3,6,5,0,1],
[0,1,0,2,0,1,0,4,1,0,5,3,6,5,0,1],[0,1,0,2,0,1,0,4,1,0,5,3,6,5,0,1],[0,1,0,2,0,1,0,4,1,0,5,3,6,5,0,1],
[0,1,0,2,0,1,0,4,1,0,5,3,6,5,0,1],[0,1,0,2,0,1,0,4,1,0,5,3,6,5,0,1],[0,1,0,2,0,1,0,4,1,0,5,3,6,5,0,1],
[0,1,0,2,0,1,0,4,1,0,5,3,6,5,0,1],[0,1,0,2,0,1,0,4,1,0,5,3,6,5,0,1],[0,1,0,2,0,1,0,4,1,0,5,3,6,5,0,1]],
[[0,1,0,2,0,1,0,4,1,0,5,3,6,5,0,1],
[0,1,0,2,0,1,0,4,1,0,5,3,6,5,0,1],[0,1,0,2,0,1,0,4,1,0,5,3,6,5,0,1],[0,1,0,2,0,1,0,4,1,0,5,3,6,5,0,1],
[0,1,0,2,0,1,0,4,1,0,5,3,6,5,0,1],[0,1,0,2,0,1,0,4,1,0,5,3,6,5,0,1],[0,1,0,2,0,1,0,4,1,0,5,3,6,5,0,1],
[0,1,0,2,0,1,0,4,1,0,5,3,6,5,0,1],[0,1,0,2,0,1,0,4,1,0,5,3,6,5,0,1],[0,1,0,2,0,1,0,4,1,0,5,3,6,5,0,1],
[0,1,0,2,0,1,0,4,1,0,5,3,6,5,0,1],[0,1,0,2,0,1,0,4,1,0,5,3,6,5,0,1],[0,1,0,2,0,1,0,4,1,0,5,3,6,5,0,1],
[0,1,0,2,0,1,0,4,1,0,5,3,6,5,0,1],[0,1,0,2,0,1,0,4,1,0,5,3,6,5,0,1],[0,1,0,2,0,1,0,4,1,0,5,3,6,5,0,1]]
], dtype = np.float32)


aa = aa[..., np.newaxis]
print (aa.shape)
bb, out1, out2, out3 =  sess.run([b, output, output1, output2], feed_dict={input1: aa, input2: xv, input3: yv})



print(bb[0])
print(bb[0].shape)


print(out1)
print(out2)
print(out3)






